/* Dashboard Theme Variables */
:root {
    --dash-bg: #0d1117;
    /* Dark background like GitHub Dimmed */
    --dash-sidebar: #161b22;
    /* Slightly lighter sidebar */
    --dash-border: #30363d;
    /* Subtle border */
    --dash-primary: #00e5ff;
    /* Cyan/Teal accent */
    --dash-primary-hover: #00b8ce;
    --dash-text-main: #c9d1d9;
    --dash-text-muted: #8b949e;
    --dash-card: #161b22;
    --dash-card-hover: #1f2428;
}

/* Dashboard Split Layout */
/* Dashboard Split Layout */
.dashboard-wrapper {
    display: flex;
    height: calc(100vh - 3.5rem);
    /* Adjust based on navbar height */
    overflow: hidden;
    margin-top: 0;
    /* Navbar is sticky in styles.css but flow might require no margin if handled there. 
       However, styles.css .navbar is sticky top:0. 
       If dashboard-wrapper follows immediately, it might be behind it if we don't margin.
       Let's check instructor.html structure. 
       Nav is before main.
       Nav is sticky.
       So main flows under it if not pushed? 
       Sticky elements take space in flow unless position:fixed.
       .navbar is position:sticky. So it takes space.
       So margin-top on next element isn't needed to avoid overlap, but if we want it flush...
       Wait, sticky keeps its space.
       So if I have margin-top: 70px, that adds 70px of space between nav and main. 
       If I remove margin-top, they should touch.
       The user said "empty bar below". That implies too much space.
       If .navbar is sticky, it stays in flow.
       So margin-top: 70px creates a 70px gap.
       I should probably remove margin-top entirely or reduce it to 0 if I want them flush.
       But if the background is different...
       Let's try removing it for now.
    */
    /* Actually, sticky relative to viewport...
       If index.html sets it to sticky, it occupies space.
       So margin-top should be 0.
       But let's look at previous CSS. It had margin-top: 70px. That seems intentional for fixed nav.
       But styles.css says sticky.
       If it was fixed, margin-top is needed.
       If it is sticky, margin-top adds extra space.
       Let's assume sticky behaves as block in flow.
       So margin-top should be 0.
    */
    background-color: var(--dash-bg);
    color: var(--dash-text-main);
    font-family: 'Inter', sans-serif;
}

/* Sidebar (30%) */
.dashboard-sidebar {
    width: 300px;
    /* Fixed width like the reference image */
    min-width: 300px;
    background-color: var(--dash-sidebar);
    border-right: 1px solid var(--dash-border);
    display: flex;
    flex-direction: column;
}

.sidebar-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--dash-border);
}

.sidebar-title {
    margin: 0 0 1rem 0;
    font-size: 1.1rem;
    font-weight: 600;
    color: white;
}

.sidebar-list {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
}

.sidebar-loading {
    text-align: center;
    padding: 2rem;
    color: var(--dash-text-muted);
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.5rem;
}

/* Course Item in Sidebar */
.course-list-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    border-radius: 0.5rem;
    cursor: pointer;
    transition: all 0.2s ease;
    border: 1px solid transparent;
    /* default transparent border */
    border-left-width: 3px;
    /* Active indicator width */
    margin-bottom: 0.5rem;
    background-color: transparent;
}

.course-list-item:hover {
    background-color: rgba(255, 255, 255, 0.03);
}

.course-list-item.active {
    background-color: rgba(0, 229, 255, 0.05);
    /* Very subtle tint */
    border-left-color: var(--dash-primary);
    /* Left accent */
}

.course-item-thumb {
    width: 48px;
    height: 48px;
    border-radius: 0.375rem;
    background-color: #21262d;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    flex-shrink: 0;
    color: var(--dash-text-muted);
}

.course-item-thumb img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.course-item-info {
    flex: 1;
    min-width: 0;
}

.course-item-title {
    font-weight: 500;
    font-size: 0.95rem;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    color: var(--dash-text-main);
}

.course-list-item.active .course-item-title {
    color: white;
}

.course-item-meta {
    font-size: 0.75rem;
    color: var(--dash-text-muted);
    margin-top: 0.25rem;
}

.editing-badge {
    font-size: 0.65rem;
    padding: 1px 6px;
    background-color: var(--dash-primary);
    color: #000;
    border-radius: 4px;
    margin-left: auto;
    /* Push to the right */
    font-weight: 700;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

/* Main Content (70%) */
.dashboard-main-view {
    flex: 1;
    padding: 2rem;
    overflow-y: auto;
    background-color: var(--dash-bg);
    position: relative;
}

.empty-state-view {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    text-align: center;
    color: var(--dash-text-muted);
}

/* Typography Overrides for Dark Mode */
h1,
h2,
h3,
h4,
h5 {
    color: white;
}

.text-muted {
    color: var(--dash-text-muted);
}

/* Form Styles */
.form-panel {
    max-width: 800px;
    margin: 0 auto;
    background: var(--dash-sidebar);
    /* Dark card */
    padding: 2rem;
    border-radius: 1rem;
    border: 1px solid var(--dash-border);
}

.page-title {
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
}

.form-group {
    margin-bottom: 1.5rem;
}

.form-label {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--dash-text-main);
}

.form-input {
    width: 100%;
    padding: 0.75rem;
    background-color: #0d1117;
    /* Input darkest bg */
    border: 1px solid var(--dash-border);
    border-radius: 0.375rem;
    color: white;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.form-input:focus {
    outline: none;
    border-color: var(--dash-primary);
    box-shadow: 0 0 0 2px rgba(0, 229, 255, 0.1);
}

.form-actions-bar {
    display: flex;
    justify-content: flex-end;
    gap: 1rem;
    margin-top: 2rem;
    padding-top: 1.5rem;
    border-top: 1px solid var(--dash-border);
}

.file-upload-wrapper {
    border: 2px dashed var(--dash-border);
    border-radius: 0.5rem;
    padding: 1.5rem;
    text-align: center;
    background-color: rgba(255, 255, 255, 0.01);
    transition: all 0.2s;
}

.file-upload-wrapper:hover {
    border-color: var(--dash-text-muted);
    background-color: rgba(255, 255, 255, 0.03);
}

#cover-preview-container img {
    max-width: 100%;
    height: auto;
    margin-top: 1rem;
    border-radius: 0.5rem;
    border: 1px solid var(--dash-border);
}

.form-row.three-col {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    gap: 1.5rem;
}

/* Detail View Styles */
.detail-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 2rem;
    gap: 1rem;
    /* Prevent overlap by adding gap */
}

.detail-title-wrapper {
    display: flex;
    flex-direction: column;
    gap: 0.5rem;
    flex: 1;
    /* Allow to take available space */
}

.detail-title {
    font-size: 2rem;
    margin: 0;
    color: white;
    line-height: 1.2;
}

.detail-badges {
    display: flex;
    gap: 0.5rem;
    /* Space between badges */
    align-items: center;
    flex-wrap: wrap;
    /* Allow wrapping if needed */
}

.badge-tag {
    font-size: 0.75rem;
    padding: 2px 8px;
    border-radius: 12px;
    background-color: rgba(0, 229, 255, 0.1);
    color: var(--dash-primary);
    border: 1px solid rgba(0, 229, 255, 0.2);
    font-weight: 600;
    white-space: nowrap;
    /* Prevent breaking inside badge */
}

.badge-tag.outline {
    background-color: transparent;
    border-color: var(--dash-border);
    color: var(--dash-text-muted);
}

.detail-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    flex-shrink: 0;
    /* Prevent shrinking */
}

.detail-cover-banner {
    width: 100%;
    height: 200px;
    border-radius: 1rem;
    background-color: var(--dash-sidebar);
    margin-bottom: 2rem;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--dash-text-muted);
    border: 1px solid var(--dash-border);
}

.detail-cover-banner img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.detail-body {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 2rem;
}

.detail-body.expanded-mode {
    grid-template-columns: 1fr;
}

.detail-section {
    background: var(--dash-sidebar);
    padding: 1.5rem;
    border-radius: 1rem;
    border: 1px solid var(--dash-border);
}

.detail-section h3 {
    font-size: 1.1rem;
    margin: 0 0 1rem 0;
    border-bottom: 1px solid var(--dash-border);
    padding-bottom: 0.5rem;
    color: var(--dash-text-main);
}

.detail-section p {
    color: var(--dash-text-muted);
    line-height: 1.6;
}

/* Modal Implementation */
.custom-modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(4px);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
}

.custom-modal-overlay.active {
    opacity: 1;
    pointer-events: auto;
}

.custom-modal-box {
    background-color: var(--dash-card);
    border: 1px solid var(--dash-border);
    border-radius: 1rem;
    width: 90%;
    max-width: 400px;
    padding: 1.5rem;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
    transform: scale(0.95);
    transition: transform 0.2s;
}

.custom-modal-overlay.active .custom-modal-box {
    transform: scale(1);
}

.modal-title {
    font-size: 1.25rem;
    font-weight: 700;
    margin: 0 0 0.5rem 0;
    color: white;
}

.modal-message {
    color: var(--dash-text-muted);
    margin-bottom: 1.5rem;
    line-height: 1.5;
}

.modal-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: flex-end;
}

/* Buttons */
.btn-primary {
    background-color: var(--dash-primary);
    color: #000;
    /* Black text on cyan for contrast */
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 0.375rem;
    font-weight: 600;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.2s;
    font-size: 0.9rem;
}

.btn-primary:hover {
    background-color: var(--dash-primary-hover);
    transform: translateY(-1px);
}

.btn-secondary {
    background-color: #21262d;
    color: var(--dash-text-main);
    border: 1px solid var(--dash-border);
    padding: 0.6rem 1.2rem;
    border-radius: 0.375rem;
    font-weight: 500;
    cursor: pointer;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    transition: all 0.2s;
    font-size: 0.9rem;
}

.btn-secondary:hover {
    background-color: #30363d;
    border-color: var(--dash-text-muted);
}

.btn-danger-outline {
    background-color: transparent;
    color: #f85149;
    border: 1px solid rgba(248, 81, 73, 0.4);
    padding: 0.6rem 1rem;
    border-radius: 0.375rem;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s;
    font-weight: 600;
}

.btn-danger-outline:hover {
    background-color: rgba(248, 81, 73, 0.1);
    border-color: #f85149;
}

.btn-danger-fill {
    background-color: #da3633;
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 0.375rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-danger-fill:hover {
    background-color: #b62324;
}

/* Animations */
@keyframes spin {
    to {
        transform: rotate(360deg);
    }
}

.spin {
    animation: spin 1s linear infinite;
}

/* Generic Helpers */
.full-width {
    width: 100%;
}

.mt-3 {
    margin-top: 1rem;
}

/* Responsive */
@media (max-width: 768px) {
    .dashboard-wrapper {
        flex-direction: column;
        height: auto;
        overflow: visible;
    }

    .dashboard-sidebar {
        width: 100%;
        height: 300px;
        border-right: none;
        border-bottom: 1px solid var(--dash-border);
    }

    .detail-body {
        grid-template-columns: 1fr;
    }

    .form-row.three-col {
        grid-template-columns: 1fr;
    }

    .detail-header {
        flex-direction: column;
        gap: 1.5rem;
    }

    .detail-actions {
        width: 100%;
        justify-content: flex-start;
    }
}

/* Tree Content Editor Styles */
.tree-module-node {
    background-color: #161b22;
    border: 1px solid var(--dash-border);
    border-radius: 0.5rem;
    margin-bottom: 1rem;
    overflow: hidden;
}

.tree-module-header {
    background-color: #21262d;
    padding: 0.75rem 1rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 1px solid var(--dash-border);
}

.tree-module-title {
    font-weight: 600;
    color: white;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.tree-class-list {
    padding: 0.5rem 0.5rem 0.5rem 1.5rem;
    /* Indent for tree effect */
    border-left: 2px solid var(--dash-border);
    /* The "Tree Branch" line */
    margin-left: 1.5rem;
}

.tree-class-item {
    background-color: #0d1117;
    border: 1px solid var(--dash-border);
    border-radius: 0.375rem;
    margin-bottom: 0.5rem;
    padding: 0.75rem;
    position: relative;
    /* Connector line to the main branch */
}

.tree-class-item::before {
    content: '';
    position: absolute;
    top: 50%;
    left: -1rem;
    width: 0.8rem;
    height: 2px;
    background-color: var(--dash-border);
}

.tree-class-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.tree-class-title {
    font-weight: 500;
    color: var(--dash-text-main);
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.tree-input-group {
    display: flex;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.tree-input {
    background-color: #161b22;
    border: 1px solid var(--dash-border);
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.8rem;
    width: 100%;
}

.tree-input:focus {
    outline: none;
    border-color: var(--dash-primary);
}

.tree-btn-icon {
    background: none;
    border: none;
    color: var(--dash-text-muted);
    cursor: pointer;
    padding: 2px;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.tree-btn-icon:hover {
    color: white;
    background-color: rgba(255, 255, 255, 0.1);
}

.btn-add-inline {
    width: 100%;
    padding: 0.5rem;
    background: transparent;
    border: 1px dashed var(--dash-border);
    color: var(--dash-text-muted);
    border-radius: 0.375rem;
    cursor: pointer;
    font-size: 0.85rem;
    margin-top: 0.5rem;
    transition: all 0.2s;
}

.btn-add-inline:hover {
    border-color: var(--dash-primary);
    color: var(--dash-primary);
    background-color: rgba(0, 229, 255, 0.05);
}

.hidden {
    display: none !important;
}