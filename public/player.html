<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Lykos | Course Player</title>

  <!-- Apply theme immediately to prevent flash -->
  <script>
    (function () {
      const theme = localStorage.getItem('theme');
      if (theme === 'light') {
        document.documentElement.classList.add('light');
      }
    })();
  </script>

  <head>
    <meta charset="UTF-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />
    <title>Lykos | Aulas</title>

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet" />
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap"
      rel="stylesheet" />
    <!-- Styles -->
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/toast.css" />
    <link rel="stylesheet" href="/css/player.css" />
    <link rel="shortcut icon" href="/assets/favicon.ico" type="image/x-icon" />

  </head>

<body class="molecular-bg">
  <!-- Navbar (Simplified) -->
  <!-- Navbar -->
  <!-- Navbar (Aligned with Project Standard) -->
  <nav class="navbar">
    <div class="nav-container">
      <!-- Sidebar Toggle Button (for player) -->
      <button id="btn-toggle-sidebar" class="btn-icon sidebar-nav-toggle">
        <span class="material-symbols-outlined">menu</span>
      </button>

      <div class="logo">
        <img src="/assets/logo.svg" alt="Lykos Logo" class="logo-img" />
      </div>

      <!-- Explore removed per user request -->

      <!-- Right Actions -->
      <div class="nav-actions">
        <!-- Solutions and Teach removed per user request -->

        <div class="cart-wrapper">
        </div>
        <!-- Theme Toggle -->
        <button class="btn-icon" id="theme-toggle" aria-label="Alternar tema">
          <span class="material-symbols-outlined theme-icon dark-icon">dark_mode</span>
          <span class="material-symbols-outlined theme-icon light-icon">light_mode</span>
        </button>
        <!-- Login Button (only visible when not logged in) -->
        <button id="user-avatar-btn" class="btn-text-login hidden">
          Entrar
        </button>
        <!-- User Info Button (only visible when logged in) -->
        <button id="user-info-btn" class="btn-text-user hidden">
          <span class="material-symbols-outlined">account_circle</span>
          <span id="user-display-name" class="user-display-name">Usuário</span>
        </button>
      </div>
    </div>
  </nav>

  <!-- Auth Flip Card (Hidden/Overlay logic same as Home) -->
  <!-- Auth Card Container -->
  <div id="auth-card-container" class="auth-container">
    <div id="auth-card" class="auth-card">
      <!-- Front: Login -->
      <div class="auth-face auth-login">
        <h3 class="auth-title">Bem-vindo de Volta</h3>
        <form id="login-form" novalidate>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input id="login-email" type="text" class="form-input" placeholder="usuario@empresa.com" />
          </div>
          <div class="form-group">
            <label class="form-label">Senha</label>
            <div class="password-wrapper">
              <input id="login-password" type="password" class="form-input" placeholder="••••••••" />
              <button type="button" class="btn-toggle-password" data-target="login-password">
                <span class="material-symbols-outlined">visibility</span>
              </button>
            </div>
          </div>
          <button type="submit" class="btn-submit">Entrar</button>
        </form>
        <div class="auth-footer">
          <p class="footer-text">Novo por aqui?</p>
          <button id="btn-to-register" class="btn-link">Criar Conta</button>
        </div>
      </div>

      <!-- Back: Register -->
      <div class="auth-face auth-register auth-face-back">
        <h3 class="auth-title">Junte-se ao Lab</h3>
        <form id="register-form" novalidate>
          <div class="form-group">
            <label class="form-label">Eu sou um...</label>
            <select id="register-role" class="form-input">
              <option value="student">Estudante</option>
              <option value="instructor">Instrutor</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Nome Completo</label>
            <input type="text" id="register-name" class="form-input" placeholder="Maria Silva" required />
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="register-email" class="form-input" placeholder="maria@email.com" required />
          </div>
          <div class="form-grid">
            <div class="form-group">
              <label class="form-label">Senha</label>
              <div class="password-wrapper">
                <input type="password" id="register-password" class="form-input" placeholder="••••" required />
                <button type="button" class="btn-toggle-password" data-target="register-password">
                  <span class="material-symbols-outlined">visibility</span>
                </button>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Confirmar</label>
              <div class="password-wrapper">
                <input type="password" id="register-confirm" class="form-input" placeholder="••••" required />
                <button type="button" class="btn-toggle-password" data-target="register-confirm">
                  <span class="material-symbols-outlined">visibility</span>
                </button>
              </div>
            </div>
          </div>
          <button type="submit" class="btn-submit">Registrar</button>
        </form>
        <div class="auth-footer">
          <p class="footer-text">Já tem acesso?</p>
          <button id="btn-to-login" class="btn-link">Voltar ao Login</button>
        </div>
      </div>

      <!-- Logged In View -->
      <div id="auth-logged-in" class="auth-face auth-logged-in hidden">
        <div class="user-avatar-large">
          <span class="material-symbols-outlined">account_circle</span>
        </div>
        <h3 id="user-name-display" class="user-name">Nome do Usuário</h3>
        <p id="user-email-display" class="user-email">usuario@exemplo.com</p>
        <div id="user-role-badge" class="role-badge">Estudante</div>

        <div class="dashboard-actions">
          <button id="btn-my-learning" class="btn-dashboard">
            <span class="material-symbols-outlined">school</span> Meu
            Aprendizado
          </button>
          <button id="btn-view-profile" class="btn-dashboard">
            <span class="material-symbols-outlined">person</span> Ver Perfil
          </button>
          <button id="btn-logout" class="btn-dashboard btn-logout">
            <span class="material-symbols-outlined">logout</span> Sair
          </button>
        </div>
      </div>

      <!-- Profile View -->
      <div id="auth-profile-view" class="auth-face hidden">
        <div class="view-header">
          <h3 class="auth-title">Meu Perfil</h3>
          <button id="btn-back-from-profile" class="btn-icon">
            <span class="material-symbols-outlined">arrow_back</span>
          </button>
        </div>

        <div class="user-avatar-large">
          <span class="material-symbols-outlined">account_circle</span>
        </div>

        <div class="profile-info">
          <div class="info-item">
            <label class="form-label">Nome</label>
            <p id="profile-view-name" class="info-value">Nome do Usuário</p>
          </div>
          <div class="info-item">
            <label class="form-label">Email</label>
            <p id="profile-view-email" class="info-value">
              usuario@exemplo.com
            </p>
          </div>
          <div class="info-item">
            <label class="form-label">Função</label>
            <p id="profile-view-role" class="info-value">Estudante</p>
          </div>
        </div>

        <div class="profile-actions">
          <button id="btn-edit-profile" class="btn-submit">
            <span class="material-symbols-outlined">edit</span> Editar Perfil
          </button>
          <button id="btn-delete-account" class="btn-delete">
            <span class="material-symbols-outlined">delete</span> Excluir
            Conta
          </button>
        </div>
      </div>

      <!-- Profile Edit View -->
      <div id="auth-profile-edit" class="auth-face hidden">
        <div class="view-header">
          <h3 class="auth-title">Editar Perfil</h3>
          <button id="btn-back-from-edit" class="btn-icon">
            <span class="material-symbols-outlined">arrow_back</span>
          </button>
        </div>

        <form id="profile-edit-form" novalidate>
          <div class="form-group">
            <label class="form-label">Nome</label>
            <input type="text" id="edit-name" class="form-input" placeholder="Seu nome" />
          </div>
          <div class="form-group">
            <label class="form-label">Email</label>
            <input type="email" id="edit-email" class="form-input" placeholder="seu@email.com" />
          </div>
          <div class="form-group">
            <label class="form-label">Nova Senha (opcional)</label>
            <div class="password-wrapper">
              <input type="password" id="edit-password" class="form-input" placeholder="••••••••" />
              <button type="button" class="btn-toggle-password" data-target="edit-password">
                <span class="material-symbols-outlined">visibility</span>
              </button>
            </div>
          </div>
          <div class="profile-actions">
            <button type="submit" class="btn-submit">
              <span class="material-symbols-outlined">save</span> Salvar
              Alterações
            </button>
            <button type="button" id="btn-cancel-edit" class="btn-dashboard outline">
              Cancelar
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <main class="main-content player-layout">
    <!-- Left Column: Video & Details -->
    <div class="player-content">
      <div class="video-container-wrapper">
        <div id="video-placeholder" class="video-placeholder">
          <span class="material-symbols-outlined icon">play_circle</span>
          <p>Selecione uma aula para começar</p>
        </div>
        <video id="html5-player" class="video-frame hidden" controlsList="nodownload">
          Seu navegador não suporta a tag de vídeo.
        </video>
        <!-- Custom Video Controls -->
        <div id="video-controls" class="video-controls hidden">
          <!-- Progress Bar -->
          <div class="progress-container-video">
            <div class="progress-bar-bg"></div>
            <div id="video-progress-fill" class="progress-bar-fill"></div>
            <input type="range" id="video-seek-slider" class="seek-slider" min="0" max="100" value="0">
          </div>
          <!-- Main Controls Row -->
          <div class="controls-main">
            <div class="controls-left">
              <!-- Play/Pause -->
              <button id="btn-play-pause" class="control-btn" title="Play/Pause">
                <span class="material-symbols-outlined">play_arrow</span>
              </button>
              <!-- Volume -->
              <div class="volume-container">
                <button id="btn-volume" class="control-btn" title="Volume">
                  <span class="material-symbols-outlined">volume_up</span>
                </button>
                <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.1" value="1">
              </div>
              <!-- Time Display -->
              <div class="time-display">
                <span id="current-time">0:00</span> / <span id="duration">0:00</span>
              </div>
            </div>
            <div class="controls-right">
              <!-- Fullscreen -->
              <button id="btn-fullscreen" class="control-btn" title="Fullscreen">
                <span class="material-symbols-outlined">fullscreen</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      <div class="class-info-section">
        <!-- Header with Title and Action -->
        <div class="class-header">
          <h1 id="class-title" class="class-title">Título da Aula</h1>
          <div class="class-actions">
            <button id="btn-toggle-sidebar-restore" class="btn-action hidden">
              <span class="material-symbols-outlined">menu_open</span>
              <span class="btn-text">Mostrar Aulas</span>
            </button>
            <button id="btn-mark-completed" class="btn-action">
              <span class="material-symbols-outlined">check_circle</span>
              <span class="btn-text">Marcar como Concluída</span>
            </button>
          </div>
        </div>

        <p id="class-description" class="class-description">
          Descrição da aula aparecerá aqui...
        </p>

        <!-- Materials Section -->
        <div id="materials-section" class="materials-section hidden">
          <h3 class="section-subtitle">
            <span class="material-symbols-outlined">folder</span>
            Materiais Complementares
          </h3>
          <div id="materials-list" class="materials-list">
            <!-- Download items injected here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Right Column: Sidebar -->
    <aside class="player-sidebar">
      <div class="sidebar-header">
        <div class="sidebar-header-top">
          <a href="/estudante" class="btn-sidebar-action">
            <span class="material-symbols-outlined">arrow_back</span>
            Cursos
          </a>
        </div>
        <h2 class="course-title-sidebar" id="course-title">Nome do Curso</h2>
        <div class="progress-container">
          <div class="flex justify-between" style="font-size: 0.75rem; margin-bottom: 0.25rem">
            <span>Progresso</span>
            <span id="course-progress-text">0%</span>
          </div>
          <div class="progress-bar">
            <div id="course-progress-fill" class="progress-fill" style="width: 0%"></div>
          </div>
        </div>

        <!-- Certificate Container (shown when course is 100% complete) -->
        <div id="certificate-container" class="certificate-container hidden">
          <!-- Button will be injected via JS -->
        </div>
      </div>

      <div id="modules-list" class="modules-accordion">
        <p style="padding: 1rem; text-align: center; color: var(--text-muted)">
          Carregando aulas...
        </p>
      </div>
    </aside>
  </main>


  <!-- Drawer Overlay -->
  <div class="drawer-overlay"></div>

  <!-- Sidebar Overlay Backdrop (Mobile) -->
  <div class="sidebar-overlay-backdrop"></div>

  <!-- User Drawer Sidebar (Left Side) -->
  <div id="user-drawer" class="user-drawer">
    <div class="user-drawer-header">
      <button id="menu-drawer-btn" class="btn-icon menu-toggle-btn">
        <span class="material-symbols-outlined">menu</span>
      </button>
    </div>

    <div class="user-drawer-content">
      <!-- Profile Section with Accordion -->
      <div class="drawer-section">
        <button id="drawer-profile-toggle" class="drawer-section-header">
          <span class="drawer-section-title">
            <span class="material-symbols-outlined">person</span>
            Perfil
          </span>
          <span class="material-symbols-outlined drawer-chevron">expand_more</span>
        </button>
        <div id="drawer-profile-panel" class="drawer-accordion-panel">
          <!-- View Mode -->
          <div id="drawer-profile-view">
            <div class="drawer-profile-info">
              <div class="drawer-avatar">
                <span class="material-symbols-outlined">account_circle</span>
              </div>
              <div class="drawer-info-row">
                <p id="drawer-user-name" class="drawer-user-name">
                  Nome do Usuário
                </p>
              </div>
              <div class="drawer-info-row">
                <span class="drawer-info-label">EMAIL</span>
                <p id="drawer-user-email" class="drawer-user-email">
                  email@exemplo.com
                </p>
              </div>
              <div class="drawer-info-row">
                <span class="drawer-info-label">FUNÇÃO</span>
                <span id="drawer-user-role" class="drawer-role-badge">Aluno</span>
              </div>
            </div>
            <div class="drawer-profile-actions">
              <button id="drawer-edit-profile" class="drawer-btn primary">
                <span class="material-symbols-outlined">edit</span>
                Editar Perfil
              </button>
              <button id="drawer-delete-account" class="drawer-btn danger">
                <span class="material-symbols-outlined">delete</span>
                Excluir Conta
              </button>
            </div>
          </div>

          <!-- Edit Mode (Hidden by default) -->
          <div id="drawer-profile-edit" class="hidden" style="padding: 0 0.5rem">
            <div style="
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                  margin-bottom: 1rem;
                ">
              <h4 style="margin: 0; color: var(--text-primary)">
                Editar Perfil
              </h4>
              <button id="drawer-cancel-edit" class="btn-icon" type="button">
                <span class="material-symbols-outlined">close</span>
              </button>
            </div>
            <form id="profile-edit-form" novalidate>
              <div class="form-group">
                <label class="form-label" style="font-size: 0.7rem">Nome</label>
                <input id="edit-name" type="text" class="form-input" placeholder="Seu nome"
                  style="font-size: 0.85rem" />
              </div>
              <div class="form-group">
                <label class="form-label" style="font-size: 0.7rem">Email</label>
                <input id="edit-email" type="email" class="form-input" placeholder="seu@email.com"
                  style="font-size: 0.85rem" />
              </div>
              <div class="form-group">
                <label class="form-label" style="font-size: 0.7rem">Nova Senha</label>
                <div class="password-wrapper">
                  <input id="edit-password" type="password" class="form-input" placeholder="Opcional"
                    style="font-size: 0.85rem" />
                  <button type="button" class="btn-toggle-password" data-target="edit-password">
                    <span class="material-symbols-outlined">visibility</span>
                  </button>
                </div>
              </div>
              <button type="submit" class="drawer-btn primary"
                style="width: 100%; justify-content: center; margin-top: 1rem">
                Salvar
              </button>
            </form>
          </div>
        </div>
      </div>

      <!-- Management Section (Instructors only) -->
      <div id="drawer-management-section" class="drawer-section hidden">
        <div class="drawer-section-label">Gerenciamento</div>
        <a href="/instructor.html" class="drawer-item">
          <span class="material-symbols-outlined">dashboard</span>
          Painel do Professor
        </a>
        <button id="drawer-categories-toggle" class="drawer-section-header">
          <span class="drawer-section-title">
            <span class="material-symbols-outlined">category</span>
            Categorias
          </span>
          <span class="material-symbols-outlined drawer-chevron">expand_more</span>
        </button>
        <div id="drawer-categories-panel" class="drawer-accordion-panel">
          <form id="category-create-form" class="category-form">
            <div class="form-group">
              <label class="form-label">Nome da Nova Categoria</label>
              <div class="category-input-group">
                <input id="new-category-name" type="text" class="form-input" placeholder="ex: Dev Web" required />
                <button type="submit" class="btn-add">
                  <span class="material-symbols-outlined">add</span>
                </button>
              </div>
            </div>
          </form>
          <div class="drawer-categories-wrapper">
            <label class="form-label">Categorias Existentes</label>
            <div id="categories-list" class="categories-list">
              <p class="loading-text">Carregando...</p>
            </div>
          </div>
        </div>
      </div>

      <!-- My Learning Section -->
      <div class="drawer-section">
        <div class="drawer-section-label">Meu Aprendizado</div>
        <a href="/estudante" class="drawer-item">
          <span class="material-symbols-outlined">school</span>
          Meus Cursos
        </a>
      </div>
    </div>

    <div class="user-drawer-footer">
      <button id="drawer-logout" class="drawer-btn logout">
        <span class="material-symbols-outlined">logout</span>
        Sair
      </button>
    </div>
  </div>

  <script type="module" src="/js/player.js"></script>
</body>

</html>